{"version":3,"file":"index.es.js","sources":["../node_modules/lodash/_freeGlobal.js","../node_modules/lodash/_root.js","../node_modules/lodash/_Symbol.js","../node_modules/lodash/_getRawTag.js","../node_modules/lodash/_objectToString.js","../node_modules/lodash/_baseGetTag.js","../node_modules/lodash/isObject.js","../node_modules/lodash/isFunction.js","../src/serialize.js","../node_modules/flatted/cjs/index.js","../src/diffElement.js","../src/index.js"],"sourcesContent":["/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","/* eslint-disable no-use-before-define */\nimport React from 'react'\nimport isString from 'lodash/isString'\nimport pick from 'lodash/pick'\nimport flatten from 'lodash/flatten'\nimport isFunction from 'lodash/isFunction'\nconst ReactIs = require('react-is')\nimport type {\n  React$Node,\n  SerializedElement,\n  SerializedChild,\n  Change,\n  SerializedChildren,\n  TextDiff\n} from './types'\n\nconst allowedProps = ['dangerouslySetInnerHTML', 'target', 'height', 'width', 'id', 'src', 'children', 'type', 'className', 'style', 'href', 'alt', 'htmlFor']\n\nvar i = 0;\n\nconst serializeChild = (child) => {\n  if (Array.isArray(child)) {\n    return serializeChildren(child)\n  } else if (\n    (ReactIs.isContextConsumer(child) || ReactIs.isContextProvider(child)) &&\n    child.props && child.props.children\n  ) {\n    if (isFunction(child.props.children)) {\n      return serializeElement(child.props.children(child.type._currentValue))\n    } else {\n      return serializeChildren(child.props.children)\n    }\n  } else if (child != null && !Array.isArray(child) && React.isValidElement(child)) {\n    return serializeElement(child)\n  } else {\n    return child\n  }\n}\n\nconst serializeChildren = (children) => {\n  if (children != null) {\n    children = !Array.isArray(children) ? [children] : children\n    return flatten(children.filter(child => child != null)).map(serializeChild)\n  }\n  return children\n}\n\nexport const serializeElement = (element) => {\n  let el = element\n\n  while (el !== null && isFunction(el.type)) {\n    if (ReactIs.isPortal(el)) {\n      el = null;\n      break;\n    }\n    const newEl = new el.type(el.props)\n    if (newEl.render != null) {\n      el = newEl.render()\n    } else {\n      el = newEl\n    }\n  }\n\n  if (ReactIs.isPortal(el)) {\n    el = null;\n  }\n\n  if (el == null || el.props == null) {\n    return el\n  }\n\n  const { props: { children, ...restProps }, type, key } = el\n\n  return {\n    type,\n    props: {\n      ...pick(restProps, allowedProps),\n      children: serializeChildren(children)\n    }\n  }\n}\n\nconst renderTextDiff = (textDiff, renderChange) => textDiff.map(\n  ({ removed, added, value }, index) => {\n    if (removed === true) {\n      return React.createElement(renderChange, {\n        type: 'removed',\n        children: value,\n        key: `removed-${index}`\n      })\n    } else if (added === true) {\n      return React.createElement(renderChange, {\n        type: 'added',\n        children: value,\n        key: `added-${index}`\n      })\n    }\n\n    if (value.type != null && value.props != null) {\n      return React.cloneElement(\n        value.type,\n        {\n          ...pick(value.props, allowedProps),\n          key: `same-${index}`\n        }\n      )\n    }\n\n    return value\n  }\n)\n\nconst renderChild = (child, renderChange) => {\n  if (child != null && (child.diffType != null)) {\n    const { diffType, ...children } = child\n    return React.createElement(\n      renderChange,\n      {\n        type: diffType,\n        children: renderChild(children, renderChange),\n        key: `key-child-${i++}`\n      }\n    )\n  } else if (child != null && child.props != null) {\n    return renderElement(child, renderChange)\n  } else if (Array.isArray(child)) {\n    return renderChildren(child, renderChange)\n  } else {\n    return child\n  }\n}\n\nconst renderChildren = (children, renderChange) => {\n  if (Array.isArray(children)) {\n    return children.filter(child => child != null).map((child, index) => {\n      if (child != null && child.props != null) {\n        // hack to ensure all elements have keys :/\n        return {\n          ...child,\n          props: {\n            ...pick(child.props, allowedProps),\n            key: `key-fix-${index}`\n          }\n        }\n      }\n      return child;\n    }).map(val => renderChild(val, renderChange))\n  } else {\n    return renderChild(children, renderChange)\n  }\n}\n\nexport const renderElement = (serializedElement, renderChange) => {\n  const { type, props: { children, ...restProps } } = serializedElement\n\n  const newProps = {\n    key: `key-fix-${i++}`,\n    ...restProps\n  }\n\n  if (children != null) {\n    newProps.children = renderChildren(children, renderChange)\n  }\n\n  return React.createElement(\n    type,\n    newProps\n  )\n}\n","var Flatted = (function (Primitive, primitive) {\n\n  /*!\n   * ISC License\n   *\n   * Copyright (c) 2018, Andrea Giammarchi, @WebReflection\n   *\n   * Permission to use, copy, modify, and/or distribute this software for any\n   * purpose with or without fee is hereby granted, provided that the above\n   * copyright notice and this permission notice appear in all copies.\n   *\n   * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n   * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n   * AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n   * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n   * LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE\n   * OR OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n   * PERFORMANCE OF THIS SOFTWARE.\n   */\n\n  var Flatted = {\n\n    parse: function parse(text, reviver) {\n      var input = JSON.parse(text, Primitives).map(primitives);\n      var value = input[0];\n      var $ = reviver || noop;\n      return $(\n        '',\n        typeof value === 'object' && value ?\n          revive(input, new Set, value, $) :\n          value\n      );\n    },\n\n    stringify: function stringify(value, replacer, space) {\n      for (var\n        firstRun,\n        known = new Map,\n        input = [],\n        output = [],\n        $ = replacer && typeof replacer === typeof input ?\n              function (k, v) {\n                if (k === '' || -1 < replacer.indexOf(k)) return v;\n              } :\n              (replacer || noop),\n        i = +set(known, input, $('', value)),\n        replace = function (key, value) {\n          if (firstRun) {\n            firstRun = !firstRun;\n            return i < 1 ? value : $(key, value);\n          }\n          var after = $(key, value);\n          switch (typeof after) {\n            case 'object':\n              if (after === null) return after;\n            case primitive:\n              return known.get(after) || set(known, input, after);\n          }\n          return after;\n        };\n        i < input.length; i++\n      ) {\n        firstRun = true;\n        output[i] = JSON.stringify(input[i], replace, space);\n      }\n      return '[' + output.join(',') + ']';\n    }\n\n  };\n\n  return Flatted;\n\n  function noop(key, value) {\n    return value;\n  }\n\n  function revive(input, parsed, output, $) {\n    return Object.keys(output).reduce(\n      function (output, key) {\n        var value = output[key];\n        if (value instanceof Primitive) {\n          var tmp = input[value];\n          if (typeof tmp === 'object' && !parsed.has(tmp)) {\n            parsed.add(tmp);\n            output[key] = $(key, revive(input, parsed, tmp, $));\n          } else {\n            output[key] = $(key, tmp);\n          }\n        } else\n          output[key] = $(key, value);\n        return output;\n      },\n      output\n    );\n  }\n\n  function set(known, input, value) {\n    var index = Primitive(input.push(value) - 1);\n    known.set(value, index);\n    return index;\n  }\n\n  // the two kinds of primitives\n  //  1. the real one\n  //  2. the wrapped one\n\n  function primitives(value) {\n    return value instanceof Primitive ? Primitive(value) : value;\n  }\n\n  function Primitives(key, value) {\n    return typeof value === primitive ? new Primitive(value) : value;\n  }\n\n}(String, 'string'));\nmodule.exports = Flatted;\n","const isString = obj => typeof obj === 'string'\nimport pick from 'lodash/pick'\nimport isObject from 'lodash/isObject'\nimport CircularJSON from 'flatted/cjs'\n\nconst stringify = (obj) => CircularJSON.stringify(obj)\n\nvar toType = function(obj) {\n  return ({}).toString.call(obj).match(/\\s([a-zA-Z]+)/)[1].toLowerCase()\n}\n\nconst diffChildren = (left, right, changes, leftPath, rightPath) => {\n  if (![left, right].every(Array.isArray)) {\n    return diff(left, right, changes, leftPath, rightPath)\n  }\n\n  const leftSide = left.map(stringify)\n  const rightSide = right.map(stringify)\n  const leftChanges = []\n  let rightChanges = []\n  const change = {}\n\n  leftSide.forEach((item, index) => {\n    if (!rightSide.includes(item)) {\n      leftChanges.push(index)\n    }\n  })\n\n  rightSide.forEach((item, index) => {\n    if (!leftSide.includes(item)) {\n      rightChanges.push(index)\n    }\n  })\n\n  const lengthDifference = rightChanges.length - leftChanges.length\n\n  // if there are more left side changes than right side change just make the right side longer :)\n  if (lengthDifference < 0) {\n    rightChanges = rightChanges.concat(Array(Math.abs(lengthDifference)).fill(null))\n  }\n\n\n  rightChanges.forEach((_, index) => {\n    diff(\n      left[leftChanges[index]],\n      right[rightChanges[index]],\n      changes,\n      leftPath.concat([leftChanges[index]]),\n      rightPath.concat([rightChanges[index]])\n    )\n  })\n\n  return changes\n}\n\nconst diffProps = ['className', 'src', 'style']\n\nconst makeElementString = (element) => Array.isArray(element) ? stringify(element) : stringify({\n  type: element.type,\n  props: {\n    ...pick(element.props, diffProps),\n    children: toType(element.props.children)\n  }\n})\n\nconst diff = (left, right, changes = [], leftPath = [], rightPath = []) => {\n  // We use the last position of the leftPath instead here, to position it correctly.\n  const newLeftPath = rightPath.slice(0, -1).concat(leftPath.slice(-1))\n\n  if ([left, right].every(Array.isArray)) {\n    diffChildren(left, right, changes, leftPath, rightPath)\n  } else if (isObject(left) && isObject(right)) {\n    const leftString = makeElementString(left)\n    const rightString = makeElementString(right)\n\n    if (leftString !== rightString) {\n      if (left) changes.push({\n        path: newLeftPath,\n        diffType: 'removed',\n        value: left\n      })\n      if (right) changes.push({\n        path: rightPath,\n        diffType: 'added',\n        value: right\n      })\n    } else {\n      diffChildren(\n        left.props.children,\n        right.props.children,\n        changes,\n        leftPath.concat(['props', 'children']),\n        rightPath.concat(['props', 'children'])\n      )\n    }\n  } else if (left !== right) {\n    if ([left, right].every(isString)) {\n      changes.push({ path: rightPath, diffType: 'updated', left, right })\n    } else {\n      if (left) changes.push({ path: newLeftPath, diffType: 'removed', value: left })\n      if (right) changes.push({ path: rightPath, diffType: 'added', value: right })\n    }\n  }\n\n  return changes\n}\n\nexport default diff\n","/* eslint-disable no-use-before-define */\n\nimport React, { Component } from 'react'\nimport set from 'lodash/set'\nimport get from 'lodash/get'\nimport flatten from 'lodash/flatten';\nconst jsdiff = require('diff');\n\nimport { serializeElement, renderElement } from './serialize'\nimport diffElement from './diffElement';\nconst addedBlock = { padding: '0.3em', background: 'green', color: '#fff' }\nconst removedBlock = { background: 'red', color: '#fff', padding: '0.3em' }\nconst addedInline = { ...addedBlock, display: 'inline-block'}\nconst removedInline = { ...removedBlock, display: 'inline-block'}\n\nconst blockElements = ['div', 'hr', 'ul', 'li', 'h1', 'h2', 'h3', 'h4', 'p']\n\nconst renderChange = ({ type, children }) => {\n  if (children == null) {\n    return null;\n  } \n  if (children != null && blockElements.includes(children.type)) {\n    return <div\n      style={type === 'added' ? addedBlock : removedBlock}\n    >{children}</div>;\n  }\n\n  return <span\n    style={type === 'added' ? addedInline : removedInline}\n  >{children}</span>;\n};\n\nconst transformValue = (val, diffType) => {\n  if (typeof val === 'string') {\n    return { diffType, type: 'span', props: { children: val } }\n  } else if (Array.isArray(val)) {\n    return val.map(item => transformValue(item, diffType));\n  } else {\n    return { ...val, diffType }\n  }\n}\n\nconst reduceChange = (acc, { path, diffType, value, left, right}) => {\n  if (diffType === 'updated') {\n    value = jsdiff.diffWords(left, right).map(item => {\n      if (item.added === true) {\n        return {\n          type: 'span',\n          diffType: 'added',\n          props:{\n            children: item.value\n          }\n        }\n      } else if (item.removed == true) {\n        return {\n          type: 'span',\n          diffType: 'removed',\n          props:{\n            children: item.value\n          }\n        }\n      } else {\n        return item.value\n      }\n    })\n    return set(acc, path, value)\n  } else if (diffType === 'removed') {\n    const [prevLast, last] = path.slice(-2)\n\n    if (prevLast === 'children') {\n      const children = get(acc, path.slice(0, -1)) || []\n\n      return set(\n        acc,\n        path.slice(0, -1),\n        flatten([\n          ...children.slice(0, last),\n          transformValue(value, diffType),\n          ...children.slice(last),\n        ])\n      )\n    }\n\n  } else if (diffType === 'added') {\n    return set(acc, path, transformValue(value, diffType))\n  }\n\n  return acc\n}\n\nconst filterNumbers = arr => arr.filter(item => typeof item === 'number')\n\nexport default class ReactVisualDiff extends Component {\n  static defaultProps = {\n    renderChange,\n  }\n\n  render() {\n    const left = serializeElement(this.props.left)\n    const right = serializeElement(this.props.right)\n\n    const changes = diffElement(left, right)\n    .sort((changeA, changeB) => {\n      const pathA = filterNumbers(changeA.path)\n      const pathB = filterNumbers(changeB.path)\n      for (var i = 0; i < pathA.length; i++) {\n        if (pathA[i] > pathB[i]) {\n          return -1;\n        } else if (pathA[i] < pathB[i]){\n          return 1;\n        } else if (changeA.diffType === 'added') {\n          return -1;\n        } else if (changeB.diffType === 'added') {\n          return 1;\n        }\n      }\n\n      return 0;\n    })\n\n    let merged = changes\n      .reduce(reduceChange, right)\n\n    return renderElement(merged, this.props.renderChange)\n  }\n}\n"],"names":["global","freeGlobal","Symbol","root","objectProto","nativeObjectToString","symToStringTag","getRawTag","objectToString","isObject","baseGetTag","ReactIs","require","allowedProps","i","serializeChild","child","Array","isArray","serializeChildren","isContextConsumer","isContextProvider","props","children","isFunction","serializeElement","type","_currentValue","React","isValidElement","flatten","filter","map","element","el","isPortal","newEl","render","restProps","key","pick","renderChild","renderChange","diffType","createElement","renderElement","renderChildren","index","val","serializedElement","newProps","set","isString","obj","stringify","CircularJSON","toType","toString","call","match","toLowerCase","diffChildren","left","right","changes","leftPath","rightPath","every","diff","leftSide","rightSide","leftChanges","rightChanges","forEach","item","includes","push","lengthDifference","length","concat","Math","abs","fill","_","diffProps","makeElementString","newLeftPath","slice","leftString","rightString","path","value","jsdiff","addedBlock","padding","background","color","removedBlock","addedInline","display","removedInline","blockElements","transformValue","reduceChange","acc","diffWords","added","removed","prevLast","last","get","filterNumbers","arr","ReactVisualDiff","diffElement","sort","changeA","changeB","pathA","pathB","merged","reduce","Component","defaultProps"],"mappings":";;;;;;;;AACA,IAAI,UAAU,GAAG,OAAOA,cAAM,IAAI,QAAQ,IAAIA,cAAM,IAAIA,cAAM,CAAC,MAAM,KAAK,MAAM,IAAIA,cAAM,CAAC;AAE3F,eAAc,GAAG,UAAU,CAAC;;ACA5B,IAAI,QAAQ,GAAG,OAAO,IAAI,IAAI,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,KAAK,MAAM,IAAI,IAAI,CAAC;AAGjF,IAAI,IAAI,GAAGC,WAAU,IAAI,QAAQ,IAAI,QAAQ,CAAC,aAAa,CAAC,EAAE,CAAC;AAE/D,SAAc,GAAG,IAAI,CAAC;;ACLtB,IAAIC,QAAM,GAAGC,KAAI,CAAC,MAAM,CAAC;AAEzB,WAAc,GAAGD,QAAM,CAAC;;ACFxB,IAAI,WAAW,GAAG,MAAM,CAAC,SAAS,CAAC;AAGnC,IAAI,cAAc,GAAG,WAAW,CAAC,cAAc,CAAC;AAOhD,IAAI,oBAAoB,GAAG,WAAW,CAAC,QAAQ,CAAC;AAGhD,IAAI,cAAc,GAAGA,OAAM,GAAGA,OAAM,CAAC,WAAW,GAAG,SAAS,CAAC;AAS7D,SAAS,SAAS,CAAC,KAAK,EAAE;EACxB,IAAI,KAAK,GAAG,cAAc,CAAC,IAAI,CAAC,KAAK,EAAE,cAAc,CAAC;MAClD,GAAG,GAAG,KAAK,CAAC,cAAc,CAAC,CAAC;EAEhC,IAAI;IACF,KAAK,CAAC,cAAc,CAAC,GAAG,SAAS,CAAC;GAEnC,CAAC,OAAO,CAAC,EAAE,EAAE;EAEd,IAAI,MAAM,GAAG,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;EAC9C,AAAc;IACZ,IAAI,KAAK,EAAE;MACT,KAAK,CAAC,cAAc,CAAC,GAAG,GAAG,CAAC;KAC7B,MAAM;MACL,OAAO,KAAK,CAAC,cAAc,CAAC,CAAC;KAC9B;GACF;EACD,OAAO,MAAM,CAAC;CACf;AAED,cAAc,GAAG,SAAS,CAAC;;AC5C3B,IAAIE,aAAW,GAAG,MAAM,CAAC,SAAS,CAAC;AAOnC,IAAIC,sBAAoB,GAAGD,aAAW,CAAC,QAAQ,CAAC;AAShD,SAAS,cAAc,CAAC,KAAK,EAAE;EAC7B,OAAOC,sBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;CACzC;AAED,mBAAc,GAAG,cAAc,CAAC;;AChBhC,IAAI,OAAO,GAAG,eAAe;IACzB,YAAY,GAAG,oBAAoB,CAAC;AAGxC,IAAIC,gBAAc,GAAGJ,OAAM,GAAGA,OAAM,CAAC,WAAW,GAAG,SAAS,CAAC;AAS7D,SAAS,UAAU,CAAC,KAAK,EAAE;EACzB,IAAI,KAAK,IAAI,IAAI,EAAE;IACjB,OAAO,KAAK,KAAK,SAAS,GAAG,YAAY,GAAG,OAAO,CAAC;GACrD;EACD,OAAO,CAACI,gBAAc,IAAIA,gBAAc,IAAI,MAAM,CAAC,KAAK,CAAC;MACrDC,UAAS,CAAC,KAAK,CAAC;MAChBC,eAAc,CAAC,KAAK,CAAC,CAAC;CAC3B;AAED,eAAc,GAAG,UAAU,CAAC;;ACF5B,SAAS,QAAQ,CAAC,KAAK,EAAE;EACvB,IAAI,IAAI,GAAG,OAAO,KAAK,CAAC;EACxB,OAAO,KAAK,IAAI,IAAI,KAAK,IAAI,IAAI,QAAQ,IAAI,IAAI,IAAI,UAAU,CAAC,CAAC;CAClE;AAED,cAAc,GAAG,QAAQ,CAAC;;AC1B1B,IAAI,QAAQ,GAAG,wBAAwB;IACnC,OAAO,GAAG,mBAAmB;IAC7B,MAAM,GAAG,4BAA4B;IACrC,QAAQ,GAAG,gBAAgB,CAAC;AAmBhC,SAAS,UAAU,CAAC,KAAK,EAAE;EACzB,IAAI,CAACC,UAAQ,CAAC,KAAK,CAAC,EAAE;IACpB,OAAO,KAAK,CAAC;GACd;EAGD,IAAI,GAAG,GAAGC,WAAU,CAAC,KAAK,CAAC,CAAC;EAC5B,OAAO,GAAG,IAAI,OAAO,IAAI,GAAG,IAAI,MAAM,IAAI,GAAG,IAAI,QAAQ,IAAI,GAAG,IAAI,QAAQ,CAAC;CAC9E;AAED,gBAAc,GAAG,UAAU,CAAC;;;;ACnC5B,AAKA,IAAMC,UAAUC,QAAQ,UAAR,CAAhB;AAUA,IAAMC,eAAe,CAAC,yBAAD,EAA4B,QAA5B,EAAsC,QAAtC,EAAgD,OAAhD,EAAyD,IAAzD,EAA+D,KAA/D,EAAsE,UAAtE,EAAkF,MAAlF,EAA0F,WAA1F,EAAuG,OAAvG,EAAgH,MAAhH,EAAwH,KAAxH,EAA+H,SAA/H,CAArB;AAEA,IAAIC,IAAI,CAAR;AAEA,IAAMC,iBAAiB,SAAjBA,cAAiB,CAACC,KAAD,EAAW;MAC5BC,MAAMC,OAAN,CAAcF,KAAd,CAAJ,EAA0B;WACjBG,kBAAkBH,KAAlB,CAAP;GADF,MAEO,IACL,CAACL,QAAQS,iBAAR,CAA0BJ,KAA1B,KAAoCL,QAAQU,iBAAR,CAA0BL,KAA1B,CAArC,KACAA,MAAMM,KADN,IACeN,MAAMM,KAAN,CAAYC,QAFtB,EAGL;QACIC,aAAWR,MAAMM,KAAN,CAAYC,QAAvB,CAAJ,EAAsC;aAC7BE,iBAAiBT,MAAMM,KAAN,CAAYC,QAAZ,CAAqBP,MAAMU,IAAN,CAAWC,aAAhC,CAAjB,CAAP;KADF,MAEO;aACER,kBAAkBH,MAAMM,KAAN,CAAYC,QAA9B,CAAP;;GAPG,MASA,IAAIP,SAAS,IAAT,IAAiB,CAACC,MAAMC,OAAN,CAAcF,KAAd,CAAlB,IAA0CY,MAAMC,cAAN,CAAqBb,KAArB,CAA9C,EAA2E;WACzES,iBAAiBT,KAAjB,CAAP;GADK,MAEA;WACEA,KAAP;;CAfJ;AAmBA,IAAMG,oBAAoB,SAApBA,iBAAoB,CAACI,QAAD,EAAc;MAClCA,YAAY,IAAhB,EAAsB;eACT,CAACN,MAAMC,OAAN,CAAcK,QAAd,CAAD,GAA2B,CAACA,QAAD,CAA3B,GAAwCA,QAAnD;WACOO,QAAQP,SAASQ,MAAT,CAAgB;aAASf,SAAS,IAAlB;KAAhB,CAAR,EAAiDgB,GAAjD,CAAqDjB,cAArD,CAAP;;SAEKQ,QAAP;CALF;AAQO,IAAME,mBAAmB,SAAnBA,gBAAmB,CAACQ,OAAD,EAAa;MACvCC,KAAKD,OAAT;SAEOC,OAAO,IAAP,IAAeV,aAAWU,GAAGR,IAAd,CAAtB,EAA2C;QACrCf,QAAQwB,QAAR,CAAiBD,EAAjB,CAAJ,EAA0B;WACnB,IAAL;;;QAGIE,QAAQ,IAAIF,GAAGR,IAAP,CAAYQ,GAAGZ,KAAf,CAAd;QACIc,MAAMC,MAAN,IAAgB,IAApB,EAA0B;WACnBD,MAAMC,MAAN,EAAL;KADF,MAEO;WACAD,KAAL;;;MAIAzB,QAAQwB,QAAR,CAAiBD,EAAjB,CAAJ,EAA0B;SACnB,IAAL;;MAGEA,MAAM,IAAN,IAAcA,GAAGZ,KAAH,IAAY,IAA9B,EAAoC;WAC3BY,EAAP;;YAGuDA,EAxBd;sBAwBnCZ,KAxBmC;MAwB1BC,QAxB0B,aAwB1BA,QAxB0B;MAwBbe,SAxBa;MAwBAZ,IAxBA,OAwBAA,IAxBA;MAwBMa,GAxBN,OAwBMA,GAxBN;SA0BpC;cAAA;wBAGAC,KAAKF,SAAL,EAAgBzB,YAAhB,CADL;gBAEYM,kBAAkBI,QAAlB;;GAJd;CA1BK;AAiEP,IAAMkB,cAAc,SAAdA,WAAc,CAACzB,KAAD,EAAQ0B,YAAR,EAAyB;MACvC1B,SAAS,IAAT,IAAkBA,MAAM2B,QAAN,IAAkB,IAAxC,EAA+C;QACrCA,QADqC,GACX3B,KADW,CACrC2B,QADqC;QACxBpB,QADwB,4BACXP,KADW;WAEtCY,MAAMgB,aAAN,CACLF,YADK,EAEL;YACQC,QADR;gBAEYF,YAAYlB,QAAZ,EAAsBmB,YAAtB,CAFZ;0BAGoB5B;KALf,CAAP;GAFF,MAUO,IAAIE,SAAS,IAAT,IAAiBA,MAAMM,KAAN,IAAe,IAApC,EAA0C;WACxCuB,cAAc7B,KAAd,EAAqB0B,YAArB,CAAP;GADK,MAEA,IAAIzB,MAAMC,OAAN,CAAcF,KAAd,CAAJ,EAA0B;WACxB8B,eAAe9B,KAAf,EAAsB0B,YAAtB,CAAP;GADK,MAEA;WACE1B,KAAP;;CAhBJ;AAoBA,IAAM8B,iBAAiB,SAAjBA,cAAiB,CAACvB,QAAD,EAAWmB,YAAX,EAA4B;MAC7CzB,MAAMC,OAAN,CAAcK,QAAd,CAAJ,EAA6B;WACpBA,SAASQ,MAAT,CAAgB;aAASf,SAAS,IAAlB;KAAhB,EAAwCgB,GAAxC,CAA4C,UAAChB,KAAD,EAAQ+B,KAAR,EAAkB;UAC/D/B,SAAS,IAAT,IAAiBA,MAAMM,KAAN,IAAe,IAApC,EAA0C;4BAGnCN,KADL;8BAGOwB,KAAKxB,MAAMM,KAAX,EAAkBT,YAAlB,CADL;8BAEkBkC;;;;aAIf/B,KAAP;KAXK,EAYJgB,GAZI,CAYA;aAAOS,YAAYO,GAAZ,EAAiBN,YAAjB,CAAP;KAZA,CAAP;GADF,MAcO;WACED,YAAYlB,QAAZ,EAAsBmB,YAAtB,CAAP;;CAhBJ;AAoBO,IAAMG,gBAAgB,SAAhBA,aAAgB,CAACI,iBAAD,EAAoBP,YAApB,EAAqC;MACxDhB,IADwD,GACZuB,iBADY,CACxDvB,IADwD;8BACZuB,iBADY,CAClD3B,KADkD;MACzCC,QADyC,yBACzCA,QADyC;MAC5Be,SAD4B;MAG1DY;sBACYpC;KACbwB,SAFC,CAAN;MAKIf,YAAY,IAAhB,EAAsB;aACXA,QAAT,GAAoBuB,eAAevB,QAAf,EAAyBmB,YAAzB,CAApB;;SAGKd,MAAMgB,aAAN,CACLlB,IADK,EAELwB,QAFK,CAAP;CAZK;;ACxJP,IAAI,OAAO,IAAI,UAAU,SAAS,EAAE,SAAS,EAAE;EAoB7C,IAAI,OAAO,GAAG;IAEZ,KAAK,EAAE,SAAS,KAAK,CAAC,IAAI,EAAE,OAAO,EAAE;MACnC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;MACzD,IAAI,KAAK,GAAG,KAAK,CAAC,CAAC,CAAC,CAAC;MACrB,IAAI,CAAC,GAAG,OAAO,IAAI,IAAI,CAAC;MACxB,OAAO,CAAC;QACN,EAAE;QACF,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK;UAChC,MAAM,CAAC,KAAK,EAAE,IAAI,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;UAChC,KAAK;OACR,CAAC;KACH;IAED,SAAS,EAAE,SAAS,SAAS,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE;MACpD,KAAK;QACH,QAAQ;QACR,KAAK,GAAG,IAAI,GAAG;QACf,KAAK,GAAG,EAAE;QACV,MAAM,GAAG,EAAE;QACX,CAAC,GAAG,QAAQ,IAAI,OAAO,QAAQ,KAAK,OAAO,KAAK;cAC1C,UAAU,CAAC,EAAE,CAAC,EAAE;gBACd,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;eACpD;eACA,QAAQ,IAAI,IAAI,CAAC;QACxB,CAAC,GAAG,CAACC,MAAG,CAAC,KAAK,EAAE,KAAK,EAAE,CAAC,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;QACpC,OAAO,GAAG,UAAU,GAAG,EAAE,KAAK,EAAE;UAC9B,IAAI,QAAQ,EAAE;YACZ,QAAQ,GAAG,CAAC,QAAQ,CAAC;YACrB,OAAO,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;WACtC;UACD,IAAI,KAAK,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;UAC1B,QAAQ,OAAO,KAAK;YAClB,KAAK,QAAQ;cACX,IAAI,KAAK,KAAK,IAAI,EAAE,OAAO,KAAK,CAAC;YACnC,KAAK,SAAS;cACZ,OAAO,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,IAAIA,MAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;WACvD;UACD,OAAO,KAAK,CAAC;SACd;QACD,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE;QACrB;QACA,QAAQ,GAAG,IAAI,CAAC;QAChB,MAAM,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;OACtD;MACD,OAAO,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;KACrC;GAEF,CAAC;EAEF,OAAO,OAAO,CAAC;EAEf,SAAS,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE;IACxB,OAAO,KAAK,CAAC;GACd;EAED,SAAS,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,EAAE;IACxC,OAAO,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,MAAM;MAC/B,UAAU,MAAM,EAAE,GAAG,EAAE;QACrB,IAAI,KAAK,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;QACxB,IAAI,KAAK,YAAY,SAAS,EAAE;UAC9B,IAAI,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;UACvB,IAAI,OAAO,GAAG,KAAK,QAAQ,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YAC/C,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;YAChB,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,MAAM,CAAC,KAAK,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;WACrD,MAAM;YACL,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;WAC3B;SACF;UACC,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;QAC9B,OAAO,MAAM,CAAC;OACf;MACD,MAAM;KACP,CAAC;GACH;EAED,SAASA,MAAG,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE;IAChC,IAAI,KAAK,GAAG,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IAC7C,KAAK,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;IACxB,OAAO,KAAK,CAAC;GACd;EAMD,SAAS,UAAU,CAAC,KAAK,EAAE;IACzB,OAAO,KAAK,YAAY,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;GAC9D;EAED,SAAS,UAAU,CAAC,GAAG,EAAE,KAAK,EAAE;IAC9B,OAAO,OAAO,KAAK,KAAK,SAAS,GAAG,IAAI,SAAS,CAAC,KAAK,CAAC,GAAG,KAAK,CAAC;GAClE;CAEF,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC;AACrB,OAAc,GAAG,OAAO,CAAC;;;ACnHzB,IAAMC,aAAW,SAAXA,QAAW;SAAO,OAAOC,GAAP,KAAe,QAAtB;CAAjB;AACA,AAIA,IAAMC,YAAY,SAAZA,SAAY,CAACD,GAAD;SAASE,IAAaD,SAAb,CAAuBD,GAAvB,CAAT;CAAlB;AAEA,IAAIG,SAAS,SAATA,MAAS,CAASH,GAAT,EAAc;SACjB,EAAD,CAAKI,QAAL,CAAcC,IAAd,CAAmBL,GAAnB,EAAwBM,KAAxB,CAA8B,eAA9B,EAA+C,CAA/C,EAAkDC,WAAlD,EAAP;CADF;AAIA,IAAMC,eAAe,SAAfA,YAAe,CAACC,IAAD,EAAOC,KAAP,EAAcC,OAAd,EAAuBC,QAAvB,EAAiCC,SAAjC,EAA+C;MAC9D,CAAC,CAACJ,IAAD,EAAOC,KAAP,EAAcI,KAAd,CAAoBlD,MAAMC,OAA1B,CAAL,EAAyC;WAChCkD,KAAKN,IAAL,EAAWC,KAAX,EAAkBC,OAAlB,EAA2BC,QAA3B,EAAqCC,SAArC,CAAP;;MAGIG,WAAWP,KAAK9B,GAAL,CAASsB,SAAT,CAAjB;MACMgB,YAAYP,MAAM/B,GAAN,CAAUsB,SAAV,CAAlB;MACMiB,cAAc,EAApB;MACIC,eAAe,EAAnB;AACA,AAEAH,WAASI,OAAT,CAAiB,UAACC,IAAD,EAAO3B,KAAP,EAAiB;QAC5B,CAACuB,UAAUK,QAAV,CAAmBD,IAAnB,CAAL,EAA+B;kBACjBE,IAAZ,CAAiB7B,KAAjB;;GAFJ;YAMU0B,OAAV,CAAkB,UAACC,IAAD,EAAO3B,KAAP,EAAiB;QAC7B,CAACsB,SAASM,QAAT,CAAkBD,IAAlB,CAAL,EAA8B;mBACfE,IAAb,CAAkB7B,KAAlB;;GAFJ;MAMM8B,mBAAmBL,aAAaM,MAAb,GAAsBP,YAAYO,MAA3D;MAGID,mBAAmB,CAAvB,EAA0B;mBACTL,aAAaO,MAAb,CAAoB9D,MAAM+D,KAAKC,GAAL,CAASJ,gBAAT,CAAN,EAAkCK,IAAlC,CAAuC,IAAvC,CAApB,CAAf;;eAIWT,OAAb,CAAqB,UAACU,CAAD,EAAIpC,KAAJ,EAAc;SAE/Be,KAAKS,YAAYxB,KAAZ,CAAL,CADF,EAEEgB,MAAMS,aAAazB,KAAb,CAAN,CAFF,EAGEiB,OAHF,EAIEC,SAASc,MAAT,CAAgB,CAACR,YAAYxB,KAAZ,CAAD,CAAhB,CAJF,EAKEmB,UAAUa,MAAV,CAAiB,CAACP,aAAazB,KAAb,CAAD,CAAjB,CALF;GADF;SAUOiB,OAAP;CAzCF;AA4CA,IAAMoB,YAAY,CAAC,WAAD,EAAc,KAAd,EAAqB,OAArB,CAAlB;AAEA,IAAMC,oBAAoB,SAApBA,iBAAoB,CAACpD,OAAD;SAAahB,MAAMC,OAAN,CAAce,OAAd,IAAyBqB,UAAUrB,OAAV,CAAzB,GAA8CqB,UAAU;UACvFrB,QAAQP,IAD+E;0BAGxFc,KAAKP,QAAQX,KAAb,EAAoB8D,SAApB,CADL;gBAEY5B,OAAOvB,QAAQX,KAAR,CAAcC,QAArB;;GAJuE,CAA3D;CAA1B;AAQA,IAAM6C,OAAO,SAAPA,IAAO,CAACN,IAAD,EAAOC,KAAP,EAA8D;MAAhDC,OAAgD,uEAAtC,EAAsC;MAAlCC,QAAkC,uEAAvB,EAAuB;MAAnBC,SAAmB,uEAAP,EAAO;MAEnEoB,cAAcpB,UAAUqB,KAAV,CAAgB,CAAhB,EAAmB,CAAC,CAApB,EAAuBR,MAAvB,CAA8Bd,SAASsB,KAAT,CAAe,CAAC,CAAhB,CAA9B,CAApB;MAEI,CAACzB,IAAD,EAAOC,KAAP,EAAcI,KAAd,CAAoBlD,MAAMC,OAA1B,CAAJ,EAAwC;iBACzB4C,IAAb,EAAmBC,KAAnB,EAA0BC,OAA1B,EAAmCC,QAAnC,EAA6CC,SAA7C;GADF,MAEO,IAAIzD,WAASqD,IAAT,KAAkBrD,WAASsD,KAAT,CAAtB,EAAuC;QACtCyB,aAAaH,kBAAkBvB,IAAlB,CAAnB;QACM2B,cAAcJ,kBAAkBtB,KAAlB,CAApB;QAEIyB,eAAeC,WAAnB,EAAgC;UAC1B3B,IAAJ,EAAUE,QAAQY,IAAR,CAAa;cACfU,WADe;kBAEX,SAFW;eAGdxB;OAHC;UAKNC,KAAJ,EAAWC,QAAQY,IAAR,CAAa;cAChBV,SADgB;kBAEZ,OAFY;eAGfH;OAHE;KANb,MAWO;mBAEHD,KAAKxC,KAAL,CAAWC,QADb,EAEEwC,MAAMzC,KAAN,CAAYC,QAFd,EAGEyC,OAHF,EAIEC,SAASc,MAAT,CAAgB,CAAC,OAAD,EAAU,UAAV,CAAhB,CAJF,EAKEb,UAAUa,MAAV,CAAiB,CAAC,OAAD,EAAU,UAAV,CAAjB,CALF;;GAhBG,MAwBA,IAAIjB,SAASC,KAAb,EAAoB;QACrB,CAACD,IAAD,EAAOC,KAAP,EAAcI,KAAd,CAAoBf,UAApB,CAAJ,EAAmC;cACzBwB,IAAR,CAAa,EAAEc,MAAMxB,SAAR,EAAmBvB,UAAU,SAA7B,EAAwCmB,UAAxC,EAA8CC,YAA9C,EAAb;KADF,MAEO;UACDD,IAAJ,EAAUE,QAAQY,IAAR,CAAa,EAAEc,MAAMJ,WAAR,EAAqB3C,UAAU,SAA/B,EAA0CgD,OAAO7B,IAAjD,EAAb;UACNC,KAAJ,EAAWC,QAAQY,IAAR,CAAa,EAAEc,MAAMxB,SAAR,EAAmBvB,UAAU,OAA7B,EAAsCgD,OAAO5B,KAA7C,EAAb;;;SAIRC,OAAP;CAvCF;;;;;;;;;AC/DA,AAIA,IAAM4B,SAAShF,QAAQ,MAAR,CAAf;AAEA,AAEA,IAAMiF,aAAa,EAAEC,SAAS,OAAX,EAAoBC,YAAY,OAAhC,EAAyCC,OAAO,MAAhD,EAAnB;AACA,IAAMC,eAAe,EAAEF,YAAY,KAAd,EAAqBC,OAAO,MAA5B,EAAoCF,SAAS,OAA7C,EAArB;AACA,IAAMI,6BAAmBL,UAAnB,IAA+BM,SAAS,cAAxC,GAAN;AACA,IAAMC,+BAAqBH,YAArB,IAAmCE,SAAS,cAA5C,GAAN;AAEA,IAAME,gBAAgB,CAAC,KAAD,EAAQ,IAAR,EAAc,IAAd,EAAoB,IAApB,EAA0B,IAA1B,EAAgC,IAAhC,EAAsC,IAAtC,EAA4C,IAA5C,EAAkD,GAAlD,CAAtB;AAEA,IAAM3D,eAAe,SAAfA,YAAe,OAAwB;MAArBhB,IAAqB,QAArBA,IAAqB;MAAfH,QAAe,QAAfA,QAAe;MACvCA,YAAY,IAAhB,EAAsB;WACb,IAAP;;MAEEA,YAAY,IAAZ,IAAoB8E,cAAc1B,QAAd,CAAuBpD,SAASG,IAAhC,CAAxB,EAA+D;WACtD;;;eACEA,SAAS,OAAT,GAAmBmE,UAAnB,GAAgCI;;;KADzC;;SAKK;;;aACEvE,SAAS,OAAT,GAAmBwE,WAAnB,GAAiCE;;;GAD1C;CAVF;AAeA,IAAME,iBAAiB,SAAjBA,cAAiB,CAACtD,GAAD,EAAML,QAAN,EAAmB;MACpC,OAAOK,GAAP,KAAe,QAAnB,EAA6B;WACpB,EAAEL,kBAAF,EAAYjB,MAAM,MAAlB,EAA0BJ,OAAO,EAAEC,UAAUyB,GAAZ,EAAjC,EAAP;GADF,MAEO,IAAI/B,MAAMC,OAAN,CAAc8B,GAAd,CAAJ,EAAwB;WACtBA,IAAIhB,GAAJ,CAAQ;aAAQsE,eAAe5B,IAAf,EAAqB/B,QAArB,CAAR;KAAR,CAAP;GADK,MAEA;0BACOK,GAAZ,IAAiBL,kBAAjB;;CANJ;AAUA,IAAM4D,eAAe,SAAfA,YAAe,CAACC,GAAD,SAAgD;MAAxCd,IAAwC,SAAxCA,IAAwC;MAAlC/C,QAAkC,SAAlCA,QAAkC;MAAxBgD,KAAwB,SAAxBA,KAAwB;MAAjB7B,IAAiB,SAAjBA,IAAiB;MAAXC,KAAW,SAAXA,KAAW;MAC/DpB,aAAa,SAAjB,EAA4B;YAClBiD,OAAOa,SAAP,CAAiB3C,IAAjB,EAAuBC,KAAvB,EAA8B/B,GAA9B,CAAkC,gBAAQ;UAC5C0C,KAAKgC,KAAL,KAAe,IAAnB,EAAyB;eAChB;gBACC,MADD;oBAEK,OAFL;iBAGC;sBACMhC,KAAKiB;;SAJnB;OADF,MAQO,IAAIjB,KAAKiC,OAAL,IAAgB,IAApB,EAA0B;eACxB;gBACC,MADD;oBAEK,SAFL;iBAGC;sBACMjC,KAAKiB;;SAJnB;OADK,MAQA;eACEjB,KAAKiB,KAAZ;;KAlBI,CAAR;WAqBOxC,IAAIqD,GAAJ,EAASd,IAAT,EAAeC,KAAf,CAAP;GAtBF,MAuBO,IAAIhD,aAAa,SAAjB,EAA4B;sBACR+C,KAAKH,KAAL,CAAW,CAAC,CAAZ,CADQ;;QAC1BqB,QAD0B;QAChBC,IADgB;QAG7BD,aAAa,UAAjB,EAA6B;UACrBrF,WAAWuF,IAAIN,GAAJ,EAASd,KAAKH,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAT,KAA+B,EAAhD;aAEOpC,IACLqD,GADK,EAELd,KAAKH,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAFK,EAGLzD,qCACKP,SAASgE,KAAT,CAAe,CAAf,EAAkBsB,IAAlB,CADL,IAEEP,eAAeX,KAAf,EAAsBhD,QAAtB,CAFF,sBAGKpB,SAASgE,KAAT,CAAesB,IAAf,CAHL,GAHK,CAAP;;GANG,MAiBA,IAAIlE,aAAa,OAAjB,EAA0B;WACxBQ,IAAIqD,GAAJ,EAASd,IAAT,EAAeY,eAAeX,KAAf,EAAsBhD,QAAtB,CAAf,CAAP;;SAGK6D,GAAP;CA7CF;AAgDA,IAAMO,gBAAgB,SAAhBA,aAAgB;SAAOC,IAAIjF,MAAJ,CAAW;WAAQ,OAAO2C,IAAP,KAAgB,QAAxB;GAAX,CAAP;CAAtB;IAEqBuC;;;;;;;;6BAKV;UACDnD,OAAOrC,iBAAiB,KAAKH,KAAL,CAAWwC,IAA5B,CAAb;UACMC,QAAQtC,iBAAiB,KAAKH,KAAL,CAAWyC,KAA5B,CAAd;UAEMC,UAAUkD,KAAYpD,IAAZ,EAAkBC,KAAlB,EACfoD,IADe,CACV,UAACC,OAAD,EAAUC,OAAV,EAAsB;YACpBC,QAAQP,cAAcK,QAAQ1B,IAAtB,CAAd;YACM6B,QAAQR,cAAcM,QAAQ3B,IAAtB,CAAd;aACK,IAAI5E,IAAI,CAAb,EAAgBA,IAAIwG,MAAMxC,MAA1B,EAAkChE,GAAlC,EAAuC;cACjCwG,MAAMxG,CAAN,IAAWyG,MAAMzG,CAAN,CAAf,EAAyB;mBAChB,CAAC,CAAR;WADF,MAEO,IAAIwG,MAAMxG,CAAN,IAAWyG,MAAMzG,CAAN,CAAf,EAAwB;mBACtB,CAAP;WADK,MAEA,IAAIsG,QAAQzE,QAAR,KAAqB,OAAzB,EAAkC;mBAChC,CAAC,CAAR;WADK,MAEA,IAAI0E,QAAQ1E,QAAR,KAAqB,OAAzB,EAAkC;mBAChC,CAAP;;;eAIG,CAAP;OAhBc,CAAhB;UAmBI6E,SAASxD,QACVyD,MADU,CACHlB,YADG,EACWxC,KADX,CAAb;aAGOlB,cAAc2E,MAAd,EAAsB,KAAKlG,KAAL,CAAWoB,YAAjC,CAAP;;;;EA/ByCgF;AAAxBT,gBACZU,eAAe;;;;;;"}